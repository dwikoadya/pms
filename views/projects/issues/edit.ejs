<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Issues</title>
    <% include ../../partials/headers %>
</head>

<body style="font-family: Arial, Helvetica, sans-serif;">
    <header>
        <% include ../../partials/navbar %>
    </header>
    <div class="d-flex" id="wrapper">
        <% include ../../partials/sidebar %>
        <div class="container-fluid">
            <h1 style="margin-top: 20px;">Edit Issues</h1>
            <hr>
            <div class="card">
                <div class="card-body">
                    <form method="POST" encType="multipart/form-data">
                        <input type="hidden" name="olddone" value="<%=issue.done%>">
                        <input type="hidden" name="oldspent"
                            value="<%=issue.spenttime == null ? '0' : issue.spenttime%>">

                        <fieldset class="form-group">
                            <div class="row">
                                <legend class="col-form-label col-sm-2 pt-0">Tracker</legend>
                                <div class="col-sm-10">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="tracker" id="Bug"
                                            value="Bug" <%= issue.tracker == 'Bug' ? 'checked' : 'disabled' %>>
                                        <label class="form-check-label" for="bugIssue">
                                            Bug
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="tracker" id="Feature"
                                            value="Feature" <%= issue.tracker == 'Feature' ? 'checked' : 'disabled' %>>
                                        <label class="form-check-label" for="featureIssue">
                                            Feature
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="tracker" id="Support"
                                            value="Support" <%= issue.tracker == 'Support' ? 'checked' : 'disabled' %>>
                                        <label class="form-check-label" for="supportIssue">
                                            Support
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </fieldset>


                        <div class="form-group row">
                            <label for="subject" class="col-sm-2 col-form-label">Subject</label>
                            <div class="col-sm-10">
                                <input type="text" class="form-control" id="subjectIssue" name="subjectIssue"
                                    placeholder="Subject" value="<%= issue.subject %>">
                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="desc" class="col-sm-2 col-form-label">Description</label>
                            <div class="col-sm-10">
                                <textarea class="form-control" id="desc" name="description"
                                    placeholder="Description"><%= issue.description %></textarea>
                            </div>
                        </div>


                        <fieldset class=" form-group">
                                <div class="row">
                                    <legend class="col-form-label col-sm-2 pt-0">Status</legend>
                                    <div class="col-sm-10">
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="status" id="newStatus"
                                                value="newStatus" <%= issue.status == 'newStatus' ? 'checked' : '' %>>
                                            <label class="form-check-label" for="newStatus">
                                                New
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="status"
                                                id="InProgressStatus" value="InProgressStatus"
                                                <%= issue.status == 'InProgressStatus' ? 'checked' : '' %>>
                                            <label class="form-check-label" for="InProgressStatus">
                                                In Progress
                                            </label>
                                        </div>
                                        <div class="form-check disabled">
                                            <input class="form-check-input" type="radio" name="status"
                                                id="resolveStatus" value="resolveStatus"
                                                <%= issue.status == 'resolveStatus' ? 'checked' : '' %>>
                                            <label class="form-check-label" for="resolveStatus">
                                                Resolve
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="status"
                                                id="feedbackStatus" value="feedbackStatus"
                                                <%= issue.status == 'feedbackStatus' ? 'checked' : '' %>>
                                            <label class="form-check-label" for="feedbackStatus">
                                                Feedback
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="status" id="closedStatus"
                                                value="closedStatus"
                                                <%= issue.status == 'closedStatus' ? 'checked' : '' %>>
                                            <label class="form-check-label" for="closedStatus">
                                                Closed
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="status"
                                                id="rejectedStatus" value="rejectedStatus"
                                                <%= issue.status == 'rejectedStatus' ? 'checked' : '' %>>
                                            <label class="form-check-label" for="rejectedStatus">
                                                Rejected
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                </fieldset>

                                <fieldset class="form-group">
                                    <div class="row">
                                        <legend class="col-form-label col-sm-2 pt-0">Priority</legend>
                                        <div class="col-sm-10">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="priority"
                                                    id="normalPriority" value="normalPriority"
                                                    <%= issue.priority == 'normalPriority' ? 'checked' : '' %>>
                                                <label class="form-check-label" for="normalPriority">
                                                    Normal
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="priority"
                                                    id="highpriority" value="highpriority"
                                                    <%= issue.priority == 'highpriority' ? 'checked' : '' %>>
                                                <label class="form-check-label" for="highpriority">
                                                    High
                                                </label>
                                            </div>
                                            <div class="form-check disabled">
                                                <input class="form-check-input" type="radio" name="priority"
                                                    id="urgentpriority" value="urgentpriority"
                                                    <%= issue.priority == 'urgentpriority' ? 'checked' : '' %>>
                                                <label class="form-check-label" for="urgentpriority">
                                                    Urgent
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="priority"
                                                    id="immediatepriority" value="immediatepriority"
                                                    <%= issue.priority == 'immediatepriority' ? 'checked' : '' %>>
                                                <label class="form-check-label" for="immediatepriority">
                                                    Immediate
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>

                                <div class="form-group row">
                                    <label for="assignee" class="col-sm-2 col-form-label">
                                        Assignee</label>
                                    <div class="col-sm-10">
                                        <select class="custom-select" name="assignee" required="">
                                            <option>Choose the Assignee ...</option>
                                            <% members.forEach(element => {%>
                                            <option value="<%= element.userid %>" <%= element.userid == issue.assignee ? 'selected' : " " %>><%= element.fullname %></option>
                                            <%})%>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label for="startDate" class="col-sm-2 col-form-label">Start Date</label>
                                    <div class="col-sm-10">
                                        <input type="date" class="form-control" id="startDate" name="startDate"
                                            placeholder="Start Date" value="<%= moment(issue.startdate).format('YYYY-MM-DD') %>" disabled>
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label for="dueDate" class="col-sm-2 col-form-label">Due Date</label>
                                    <div class="col-sm-10">
                                        <input type="date" class="form-control" id="dueDate" name="dueDate"
                                            placeholder="Due Date" value="<%= moment(issue.duedate).format('YYYY-MM-DD') %>">
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label for="estimatedTime" class="col-sm-2 col-form-label">Estimated Time</label>
                                    <div class="col-sm-10">
                                        <input type="number" class="form-control" id="estimatedTime"
                                            name="estimatedTime" placeholder="Estimated Time by Hours" value="<%= issue.estimatedtime %>" disabled>
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label for="done" class="col-sm-2 col-form-label">
                                        Done</label>
                                    <div class="col-sm-10">
                                        <select class="custom-select" name="done" required="">
                                            <option>Choose the Percentage ...</option>
                                            <option value="0" <%= issue.done == 0 ? 'selected' : '' %>>0%</option>
                                            <option value="10" <%= issue.done == 10 ? 'selected' : '' %>>10%</option>
                                            <option value="20" <%= issue.done == 20 ? 'selected' : '' %>>20%</option>
                                            <option value="30" <%= issue.done == 30 ? 'selected' : '' %>>30%</option>
                                            <option value="40" <%= issue.done == 40 ? 'selected' : '' %>>40%</option>
                                            <option value="50" <%= issue.done == 50 ? 'selected' : '' %>>50%</option>
                                            <option value="60" <%= issue.done == 60 ? 'selected' : '' %>>60%</option>
                                            <option value="70" <%= issue.done == 70 ? 'selected' : '' %>>70%</option>
                                            <option value="80" <%= issue.done == 80 ? 'selected' : '' %>>80%</option>
                                            <option value="90" <%= issue.done == 90 ? 'selected' : '' %>>90%</option>
                                            <option value="100" <%= issue.done == 100 ? 'selected' : '' %>>100%</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label for="parenttask" class="col-sm-2 col-form-label">
                                        Parent Task</label>
                                    <div class="col-sm-10">
                                        <select class="custom-select" name="parenttask" required>
                                            <option value="" selected disabled>Choose the Parent Task ...</option>
                                            <% parent.forEach(element => {%>
                                            <option value="<%= element.issueid %>"><%= element.subject %>(<%= element.tracker %>)</option>
                                            <%})%>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group row ">
                                    <label for="spenttime" class="col-sm-2 col-form-label">Spent Time
                                    </label>
                                    <div class="col-sm-4">
                                        <input type="number" class="form-control" id="spenttime" name="spenttime"
                                            placeholder="Spent Time by Hours" value="<%= issue.spenttime %>" required>
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label for="target" class="col-sm-2 col-form-label">Target Version</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" id="target" name="target"
                                            placeholder="ex: version 1.0" value="<%= issue.targetversion %>" required>
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label for="author" class="col-sm-2 col-form-label">Author</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" id="author" name="author" value="<%= issue.authorname %>"
                                            disabled>
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label for="inputFile" class="col-sm-2 col-form-label">File</label>
                                    <div class="col-sm-10">
                                        <div class="custom-file">
                                            <input type="file" class="custom-file-input" id="inputFile" name="file">
                                            <label class="custom-file-label" for="inputFile"><%= issue.files ? 'Change file ...' : 'Choose file ...' %></label>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <div class="col-sm-10">
                                        <button type="submit" class="btn btn-primary">Save</button>
                                    </div>
                                </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</body>

</html>